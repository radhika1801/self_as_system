<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tokyo Transit Journey Explorer</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Custom Fonts */
    @font-face {
      font-family: 'NeueMachina';
      src: url('NeueMachina-Regular.otf') format('opentype');
      font-weight: normal;
    }
    @font-face {
      font-family: 'NeueMachina';
      src: url('NeueMachina-Light.otf') format('opentype');
      font-weight: 300;
    }
    :root {
      --primary: #66fcf1;
      --primary-dark: #45a29e;
      --secondary: #1f2833;
      --background: #0b0c10;
      --text: #c5c6c7;
      --card-bg: rgba(31, 40, 51, 0.85);
      --highlight: rgba(102, 252, 241, 0.2);
      --shadow: rgba(0, 0, 0, 0.5);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--background);
      font-family: 'NeueMachina', sans-serif;
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    header {
      text-align: center;
      padding: 2rem 1rem;
      background: linear-gradient(to bottom, rgba(11, 12, 16, 0.9), transparent);
      animation: fadeDown 1.2s ease;
    }

    @keyframes fadeDown {
      from { opacity: 0; transform: translateY(-30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .logo {
      font-size: 2.8rem;
      font-weight: bold;
      background: linear-gradient(45deg, var(--primary), var(--primary-dark));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
      letter-spacing: 3px;
      text-shadow: 0 0 10px rgba(102, 252, 241, 0.3);
    }

    .subtitle {
      font-size: 1.1rem;
      opacity: 0.8;
      max-width: 600px;
      margin: 0 auto;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 2rem 1rem;
      flex-wrap: wrap;
    }

    #searchBar {
      padding: 0.8rem 1rem 0.8rem 2.5rem;
      border-radius: 2rem;
      border: 1px solid var(--secondary);
      background: rgba(31, 40, 51, 0.7);
      color: var(--text);
      width: 250px;
      transition: all 0.3s;
    }
    #searchBar:focus {
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(102, 252, 241, 0.4);
      outline: none;
    }

    .filter-btn {
      padding: 0.6rem 1.2rem;
      border-radius: 1.5rem;
      border: 1px solid var(--secondary);
      background: var(--card-bg);
      color: var(--text);
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s;
    }
    .filter-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      transform: translateY(-2px);
    }
    .filter-btn.active {
      background: var(--primary-dark);
      color: #fff;
      box-shadow: 0 0 15px rgba(102, 252, 241, 0.3);
    }

    .nav-btn {
      background-color: var(--primary);
      color: #000;
      font-weight: bold;
    }
    .nav-btn:hover {
      background-color: #fff;
      color: var(--primary-dark);
    }

    .grid-container {
      width: 100%;
      min-height: 70vh;
      padding: 2rem;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .card {
      background: var(--card-bg);
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 5px 15px var(--shadow);
      border: 1px solid transparent;
      backdrop-filter: blur(5px);
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.5s ease, border-color 0.3s;
    }

    .card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .card:hover {
      transform: translateY(-7px) scale(1.02);
      box-shadow: 0 10px 25px rgba(102, 252, 241, 0.3);
      border-color: var(--primary);
    }

    .card-type {
      font-size: 0.8rem;
      padding: 0.3rem 0.8rem;
      border-radius: 1rem;
      background: var(--highlight);
      color: var(--primary);
      display: inline-block;
      margin-bottom: 0.5rem;
    }

    .card h3 {
      margin: 0;
      font-size: 1.3rem;
      color: var(--primary);
    }

    .card p {
      margin: 0.3rem 0;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .card-value {
      font-size: 1.2rem;
      font-weight: bold;
      margin-top: 1rem;
      color: var(--primary);
      text-align: right;
      transition: all 0.3s;
    }

    /* Cursor trail */
    .cursor-trail {
      width: 6px;
      height: 6px;
      background: rgba(0, 255, 255, 0.6);
      border-radius: 50%;
      position: fixed;
      pointer-events: none;
      z-index: 9999;
      box-shadow: 0 0 12px rgba(0, 255, 255, 0.9);
      transform: translate(-50%, -50%);
      animation: fadeOut 0.8s forwards;
    }
    @keyframes fadeOut {
      from { opacity: 1; transform: scale(1); }
      to { opacity: 0; transform: scale(2); }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">TOKYO TRANSIT</div>
    <div class="subtitle">Explore your transit journey data across Tokyo's network</div>
  </header>

  <div class="controls">
    <input type="text" id="searchBar" placeholder="Search transactions...">
    <button class="filter-btn active" data-filter="All">All</button>
    <button class="filter-btn" data-filter="Transit">Transit</button>
    <button class="filter-btn" data-filter="Bus">Bus</button>
    <button class="filter-btn" data-filter="Purchase">Purchase</button>
    <button class="filter-btn" data-filter="Credit">Credit</button>
    <button class="filter-btn nav-btn" onclick="location.href='gallery.html'">Open Gallery</button>
  </div>

  <div class="grid-container">
    <div class="grid" id="transactionGrid"></div>
  </div>

  <script>
    const transitData = [
      { type: "Transit", station: "Shinjuku", line: "JR Yamanote", value: 200 },
      { type: "Purchase", station: "Ikebukuro", detail: "Vending Machine", value: 120 },
      { type: "Credit", station: "Top-Up", value: 5000 },
      { type: "Transit", station: "Ueno", line: "JR Keihin-Tohoku", value: 220 },
      { type: "Purchase", station: "Tokyo", detail: "Kiosk", value: 150 },
      { type: "Transit", station: "Asakusa", line: "Tokyo Metro Ginza", value: 170 },
      { type: "Bus", station: "Shibuya", detail: "Keio Bus", value: 210 },
      { type: "Transit", station: "Roppongi", line: "Tokyo Metro Hibiya", value: 199 },
      { type: "Purchase", station: "Akihabara", detail: "Convenience Store", value: 300 },
      { type: "Credit", station: "Top-Up", value: 2000 },
      { type: "Transit", station: "Kamakura", line: "JR Yokosuka", value: 945 },
      { type: "Bus", station: "Meguro", detail: "Toei Bus", value: 180 },
      { type: "Transit", station: "Ebisu", line: "JR Yamanote", value: 154 },
      { type: "Purchase", station: "Ginza", detail: "Drink Vending", value: 130 },
      { type: "Transit", station: "Odaiba", line: "Yurikamome", value: 370 },
      { type: "Credit", station: "Top-Up", value: 1000 }
    ];

    class TransitVisualizer {
      constructor(data) {
        this.data = data;
        this.filteredData = [...data];
        this.grid = document.getElementById('transactionGrid');
        this.createCards();
        this.setupSearch();
        this.setupFilters();
        this.revealOnScroll();
      }

      createCards() {
        this.grid.innerHTML = "";
        this.filteredData.forEach((tx, i) => {
          const card = document.createElement('div');
          card.classList.add('card');
          card.style.transitionDelay = `${i * 0.05}s`;
          
          let icon = 'fa-receipt';
          if (tx.type === 'Transit') icon = 'fa-train';
          if (tx.type === 'Bus') icon = 'fa-bus';
          if (tx.type === 'Purchase') icon = 'fa-shopping-bag';
          if (tx.type === 'Credit') icon = 'fa-plus-circle';

          card.innerHTML = `
            <span class="card-type">${tx.type}</span>
            <h3>${tx.station}</h3>
            <p><i class="fas ${icon}"></i> ${tx.line || tx.detail || "Transaction"}</p>
            <div class="card-value" data-value="${tx.value}">¥0</div>
          `;
          this.grid.appendChild(card);
        });
        this.animateValues();
      }

      animateValues() {
        const counters = document.querySelectorAll('.card-value');
        counters.forEach(counter => {
          const target = +counter.dataset.value;
          let current = 0;
          const step = Math.ceil(target / 50);
          const interval = setInterval(() => {
            current += step;
            if (current >= target) {
              current = target;
              clearInterval(interval);
            }
            counter.textContent = `¥${current}`;
          }, 20);
        });
      }

      setupSearch() {
        const searchBar = document.getElementById('searchBar');
        searchBar.addEventListener('input', (e) => {
          const query = e.target.value.toLowerCase();
          this.filteredData = this.data.filter(tx =>
            Object.values(tx).some(val => String(val).toLowerCase().includes(query))
          );
          this.createCards();
        });
      }

      setupFilters() {
        const buttons = document.querySelectorAll('.filter-btn');
        buttons.forEach(btn => {
          btn.addEventListener('click', () => {
            buttons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const filter = btn.dataset.filter;
            if (filter === "All") {
              this.filteredData = [...this.data];
            } else {
              this.filteredData = this.data.filter(tx => tx.type === filter);
            }
            this.createCards();
          });
        });
      }

      revealOnScroll() {
        const reveal = () => {
          const cards = document.querySelectorAll('.card');
          const triggerBottom = window.innerHeight * 0.9;
          cards.forEach(card => {
            const top = card.getBoundingClientRect().top;
            if (top < triggerBottom) {
              card.classList.add('visible');
            }
          });
        };
        window.addEventListener('scroll', reveal);
        window.addEventListener('load', reveal);
      }
    }

    new TransitVisualizer(transitData);

    // Cursor trail
    document.addEventListener("mousemove", e => {
      const trail = document.createElement("div");
      trail.className = "cursor-trail";
      document.body.appendChild(trail);
      trail.style.left = e.pageX + "px";
      trail.style.top = e.pageY + "px";
      setTimeout(() => trail.remove(), 800);
    });
  </script>
</body>
</html>
